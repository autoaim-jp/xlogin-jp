<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: setting/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: setting/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* /setting/index.js */
import browserServerSetting from './browserServerSetting.js'

const setting = {}

const init = (env) => {
  setting.env = {}
  setting.env.SERVER_ORIGIN = env.SERVER_ORIGIN
  setting.env.SESSION_SECRET = env.SESSION_SECRET
  setting.env.TLS_KEY_PATH = env.TLS_KEY_PATH
  setting.env.TLS_CERT_PATH = env.TLS_CERT_PATH
  setting.env.SERVER_PORT = env.SERVER_PORT
}

setting.startup = {}
setting.startup.MAX_RETRY_PSQL_CONNECT_N = 30
setting.server = {}
setting.server.AUTH_SERVER_CLIENT_ID = 'auth'
setting.server.PUBLIC_BUILD_DIR = 'view/build'
setting.server.PUBLIC_STATIC_DIR = 'view/static'
setting.server.PRIVATE_FILE_DIR = 'data/file'
setting.server.FILE_LIST_JSON = 'data/fileList.json'

setting.oidc = {}
setting.oidc.CODE_L = 64
setting.oidc.ACCESS_TOKEN_L = 64

setting.url = {}
setting.url.API_VERSION = 'v0.1.0'
setting.url.ERROR_PAGE = '/error'
setting.url.AFTER_CONNECT = '/login'
setting.url.AFTER_CHECK_CREDENTIAL = '/confirm'

setting.condition = {}
setting.condition.LOGIN = 'login'
setting.condition.CONFIRM = 'confirm'
setting.condition.CODE = 'code'
setting.condition.USER_INFO = 'user_info'

setting.session = {}
setting.session.SESSION_ID = 'sid'
setting.session.SESSION_COOKIE_SECURE = false
setting.session.REDIS_PORT = 6379
setting.session.REDIS_HOST = 'rediscontainer'
setting.session.REDIS_DB = 1

setting.user = {}
setting.user.SERVICE_USER_ID_L = 64
setting.user.HMAC_SECRET = 'xlogin20220630'
setting.user.DEFAULT_USER_NAME = 'no name'

setting.notification = {}
/**
 * 全ての通知を取得する際に使うキーワード。
 * xlogin内で表示するときに使う。
 * 新サービスのクライアントIDには使用できない。
 * @param setting.notification.ALL_NOTIFICATION
 * @memberof parameter
 */
setting.notification.ALL_NOTIFICATION = 'global'

/**
 * xdevkitからコピーしたbrowserServerSettingをここから呼び出す。
 * @param setting.browserServerSetting
 * @memberof parameter
 */
setting.browserServerSetting = browserServerSetting

const getList = (...keyList) => {
  /* eslint-disable no-param-reassign */
  const constantList = keyList.reduce((prev, key) => {
    let value = setting
    for (const keySplit of key.split('.')) {
      value = value[keySplit]
    }
    prev[key.slice(key.lastIndexOf('.') + 1)] = value
    return prev
  }, {})
  for (const key of keyList) {
    if (constantList[key.slice(key.lastIndexOf('.') + 1)] === undefined) {
      throw new Error(`[error] undefined setting constant: ${key}`)
    }
  }
  return constantList
}


const getValue = (key) => {
  let value = setting
  for (const keySplit of key.split('.')) {
    value = value[keySplit]
  }
  return value
}

export default {
  init,
  getList,
  getValue,
  browserServerSetting,
}

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="feature.html">feature</a></li><li><a href="file.html">file</a></li><li><a href="function.html">function</a></li><li><a href="parameter.html">parameter</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_afterCheckPermission">_afterCheckPermission</a></li><li><a href="global.html#_credentialCheck">_credentialCheck</a></li><li><a href="global.html#createPgPool">createPgPool</a></li><li><a href="global.html#handleCode">handleCode</a></li><li><a href="global.html#handleConfirm">handleConfirm</a></li><li><a href="global.html#handleConnect">handleConnect</a></li><li><a href="global.html#handleCredentialCheck">handleCredentialCheck</a></li><li><a href="global.html#handleFileContent">handleFileContent</a></li><li><a href="global.html#handleFileDelete">handleFileDelete</a></li><li><a href="global.html#handleFileList">handleFileList</a></li><li><a href="global.html#handleFileUpdate">handleFileUpdate</a></li><li><a href="global.html#handleGlobalNotification">handleGlobalNotification</a></li><li><a href="global.html#handleLogout">handleLogout</a></li><li><a href="global.html#handleNotificationAppend">handleNotificationAppend</a></li><li><a href="global.html#handleNotificationList">handleNotificationList</a></li><li><a href="global.html#handleNotificationOpen">handleNotificationOpen</a></li><li><a href="global.html#handleScope">handleScope</a></li><li><a href="global.html#handleThrough">handleThrough</a></li><li><a href="global.html#handleUserAdd">handleUserAdd</a></li><li><a href="global.html#handleUserInfo">handleUserInfo</a></li><li><a href="global.html#handleUserInfoUpdate">handleUserInfoUpdate</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#isValidSignature">isValidSignature</a></li><li><a href="global.html#monkeyPatch">monkeyPatch</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Sat Jul 29 2023 15:14:57 GMT+0900 (日本標準時)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
